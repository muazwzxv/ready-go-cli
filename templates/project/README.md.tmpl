# {{.ProjectName}}

{{.Description}}

## Features

- ğŸ—ï¸ Clean Architecture (Entity, DTO, Repository, Service, Handler layers)
- ğŸ”§ Multi-config support (Environment variables + TOML files)
- ğŸ³ Docker & Docker Compose setup
- ğŸ—„ï¸ MySQL database with sqlx
- ğŸŒ Fiber v2 web framework
- âœ… Health check endpoints
- ğŸ”’ Middleware (logging, error handling, CORS)
- ğŸ“¦ Sample CRUD API for {{.SampleAPIName}}

## Prerequisites

- Go {{.GoVersion}} or higher
- Docker and Docker Compose
- Make (optional, for convenience commands)

## Quick Start

### Using Docker Compose (Recommended)

1. Start all services:
```bash
make up
```

2. Run database migrations:
```bash
make migrate-up
```

3. Access the application:
- API: http://localhost:{{.AppPort}}
- Health Check: http://localhost:{{.AppPort}}/health
{{if .WithKafka}}
- Kafka UI: http://localhost:{{.KafkaUIPort}}
{{end}}

### Local Development

1. Start only the database services:
```bash
docker-compose up -d mysql{{if .WithRedis}} redis{{end}}{{if .WithKafka}} kafka{{end}}
```

2. Run the application:
```bash
make run
```

## Configuration

The application supports multi-source configuration with the following priority:

**Environment Variables â†’ TOML File â†’ Defaults**

### Environment Variables

Key environment variables:

```bash
SERVER_HOST=0.0.0.0
SERVER_PORT={{.AppPort}}
DB_HOST=localhost
DB_PORT={{.MySQLPort}}
DB_USER=appuser
DB_PASSWORD=apppassword
DB_DATABASE={{.ProjectName}}
```

See `.env.example` for all available options.

### TOML Configuration

Edit `config.toml` for structured configuration:

```toml
[server]
host = "0.0.0.0"
port = {{.AppPort}}

[database]
host = "localhost"
port = {{.MySQLPort}}
user = "appuser"
password = "apppassword"
database = "{{.ProjectName}}"
```

## API Endpoints

### Health Check
- `GET /health` - Basic health check
- `GET /health/ready` - Readiness check (includes database status)

### {{.SampleAPIName}} API
- `GET /api/v1/{{.SampleTableName}}` - List all {{.SampleTableName}} (paginated)
- `POST /api/v1/{{.SampleTableName}}` - Create a new {{.SampleAPINameLower}}
- `GET /api/v1/{{.SampleTableName}}/:id` - Get {{.SampleAPINameLower}} by ID
- `PUT /api/v1/{{.SampleTableName}}/:id` - Update {{.SampleAPINameLower}}
- `DELETE /api/v1/{{.SampleTableName}}/:id` - Delete {{.SampleAPINameLower}}

## Development

### Available Make Commands

```bash
make help          # Show all available commands
make up            # Start all services
make down          # Stop all services
make logs          # Show logs from all services
make build         # Build the application
make run           # Run the application locally
make migrate-up    # Run database migrations
make migrate-down  # Rollback last migration
make test          # Run tests
make clean         # Stop services and remove volumes
```

### Database Migrations

Create a new migration:
```bash
make migrate-create NAME=add_users_table
```

Run migrations:
```bash
make migrate-up
```

Rollback:
```bash
make migrate-down
```

## Project Structure

```
{{.ProjectName}}/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go              # Application entry point
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/                  # Configuration management
â”‚   â”œâ”€â”€ database/                # Database setup & migrations
â”‚   â”œâ”€â”€ entity/                  # Domain models
â”‚   â”œâ”€â”€ dto/                     # Data Transfer Objects
â”‚   â”‚   â”œâ”€â”€ request/            # API request structures
â”‚   â”‚   â””â”€â”€ response/           # API response structures
â”‚   â”œâ”€â”€ repository/              # Data access layer
â”‚   â”œâ”€â”€ service/                 # Business logic layer
â”‚   â”œâ”€â”€ handler/                 # HTTP handlers
â”‚   â””â”€â”€ application.go           # Application wiring
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ Makefile
â””â”€â”€ config.toml
```

## Technology Stack

- **Web Framework**: [Fiber v2](https://gofiber.io/)
- **Database**: MySQL {{.MySQLVersion}} with [sqlx](https://github.com/jmoiron/sqlx)
- **Configuration**: [TOML](https://github.com/BurntSushi/toml) + Environment Variables
{{if .WithRedis}}
- **Cache**: Redis {{.RedisVersion}}
{{end}}
{{if .WithKafka}}
- **Message Queue**: Apache Kafka {{.KafkaVersion}}
{{end}}
- **Migrations**: [goose](https://github.com/pressly/goose)

## Deployment

### Docker

Build the Docker image:
```bash
make docker-build
```

Run with Docker:
```bash
docker run -p {{.AppPort}}:{{.AppPort}} --env-file .env.docker {{.ProjectName}}:latest
```

### Production Checklist

- [ ] Update database credentials
- [ ] Configure proper logging
- [ ] Set up monitoring and alerting
- [ ] Enable HTTPS/TLS
- [ ] Configure rate limiting
- [ ] Set up backup strategy
- [ ] Review security headers

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License.

## Author

{{if .Author}}{{.Author}}{{else}}Your Name{{end}}

---

**Generated with [ready-go-cli](https://github.com/muazwzxv/ready-go-cli)**
